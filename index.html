from flask import Flask, request, jsonify
import re

app = Flask(__name__)

CREEP_KEYWORDS = [ ]

SAFE_RESPONSES = [ ]

def calculate_creep_score(message):
    message = message.lower()
    matches = [kw for kw in CREEP_KEYWORDS if re.search(kw, message)]
    score = len(matches) * 10  # 10 points per keyword match
    return min(score, 100), matches

@app.route('/analyze', methods=['POST'])
def analyze_message():
    data = request.get_json()
    message = data.get('message', '')

    score, flags = calculate_creep_score(message)

    response = {
        'creep_score': score, 'flagged_phrases': flags, 'is_flagged': score >= 30, 'safe_responses': SAFE_RESPONSES if score >= 30 else []
    }
    return jsonify(response)

if __name__ == '__main__':
    app.run(debug=True)
